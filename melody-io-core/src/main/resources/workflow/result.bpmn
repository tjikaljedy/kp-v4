<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" id="definitions_ba726ce2-11c6-4c8c-94b7-230500fdf9bd" targetNamespace="http://www.omg.org/spec/BPMN/20100524/MODEL" exporter="Camunda Modeler" exporterVersion="5.4.2">
  <process id="trip" isExecutable="true">
    <startEvent id="Start-trip" name="Start-trip">
      <outgoing>sequenceFlow_c50fdc81-747a-4320-9674-8ee0d92ecbc3</outgoing>
    </startEvent>
    <serviceTask id="Activity-Reserve-car" name="Reserve car" camunda:class="io.melody.core.infra.adapter.ReserveCarAdapter">
      <incoming>sequenceFlow_c50fdc81-747a-4320-9674-8ee0d92ecbc3</incoming>
      <outgoing>sequenceFlow_b3241131-5373-432b-b6ce-8f1780aee84c</outgoing>
    </serviceTask>
    <sequenceFlow id="sequenceFlow_c50fdc81-747a-4320-9674-8ee0d92ecbc3" sourceRef="Start-trip" targetRef="Activity-Reserve-car" />
    <boundaryEvent id="boundaryEvent_4c241145-4137-4520-b72c-cb1d27dd05c9" attachedToRef="Activity-Reserve-car">
      <compensateEventDefinition id="compensateEventDefinition_1e4a07c3-76cb-4d93-b4f0-50fbd01378c7" />
    </boundaryEvent>
    <serviceTask id="Activity-Cancel-car-compensation" name="Cancel car" isForCompensation="true" camunda:class="io.melody.core.infra.adapter.CancelCarAdapter" />
    <serviceTask id="Activity-Book-hotel" name="Book hotel" camunda:class="io.melody.core.infra.adapter.BookHotelAdapter">
      <incoming>sequenceFlow_b3241131-5373-432b-b6ce-8f1780aee84c</incoming>
      <outgoing>sequenceFlow_3f812ff8-ab94-414a-b539-fe149e4c22f3</outgoing>
    </serviceTask>
    <sequenceFlow id="sequenceFlow_b3241131-5373-432b-b6ce-8f1780aee84c" sourceRef="Activity-Reserve-car" targetRef="Activity-Book-hotel" />
    <boundaryEvent id="boundaryEvent_81ce4673-5d9b-42ad-9f40-f3c840c14b5c" attachedToRef="Activity-Book-hotel">
      <compensateEventDefinition id="compensateEventDefinition_98ca5899-0d2f-40b4-9b3d-8c9eb588bf22" />
    </boundaryEvent>
    <serviceTask id="Activity-Cancel-hotel-compensation" name="Cancel hotel" isForCompensation="true" camunda:class="io.melody.core.infra.adapter.CancelHotelAdapter" />
    <serviceTask id="Activity-Book-flight" name="Book flight" camunda:class="io.melody.core.infra.adapter.BookFlightAdapter">
      <incoming>sequenceFlow_3f812ff8-ab94-414a-b539-fe149e4c22f3</incoming>
      <outgoing>sequenceFlow_cdddb28b-dbda-4c70-83ad-2d5262cf8afa</outgoing>
    </serviceTask>
    <sequenceFlow id="sequenceFlow_3f812ff8-ab94-414a-b539-fe149e4c22f3" sourceRef="Activity-Book-hotel" targetRef="Activity-Book-flight" />
    <boundaryEvent id="boundaryEvent_27317723-f1f7-4057-a25d-d080965b47ee" attachedToRef="Activity-Book-flight">
      <compensateEventDefinition id="compensateEventDefinition_8bf65dbb-3c74-4b76-9305-178b03633f16" />
    </boundaryEvent>
    <endEvent id="End-trip" name="End-trip">
      <incoming>sequenceFlow_cdddb28b-dbda-4c70-83ad-2d5262cf8afa</incoming>
    </endEvent>
    <sequenceFlow id="sequenceFlow_cdddb28b-dbda-4c70-83ad-2d5262cf8afa" sourceRef="Activity-Book-flight" targetRef="End-trip" />
    <subProcess id="subProcess_fa3e7581-038b-47aa-9402-8a17a606e586" triggeredByEvent="true">
      <startEvent id="ErrorCatched" name="ErrorCatched">
        <outgoing>sequenceFlow_e950c759-ab52-4221-938e-d5922efdd6b0</outgoing>
        <errorEventDefinition id="errorEventDefinition_1aac3d5c-75e2-4fe6-907b-a89cad9f7563" errorRef="error_b9f7d239-e1d2-45cf-a174-1c004f846e88" />
      </startEvent>
      <intermediateThrowEvent id="ToBeCompensated" name="ToBeCompensated">
        <incoming>sequenceFlow_e950c759-ab52-4221-938e-d5922efdd6b0</incoming>
        <outgoing>sequenceFlow_72fe72b3-539f-4eab-89bf-41dfbe3fb161</outgoing>
        <compensateEventDefinition id="compensateEventDefinition_a0868b52-17c3-4aa2-b757-13c0a14cd9d8" />
      </intermediateThrowEvent>
      <sequenceFlow id="sequenceFlow_e950c759-ab52-4221-938e-d5922efdd6b0" sourceRef="ErrorCatched" targetRef="ToBeCompensated" />
      <endEvent id="ErrorHandled" name="ErrorHandled">
        <incoming>sequenceFlow_72fe72b3-539f-4eab-89bf-41dfbe3fb161</incoming>
      </endEvent>
      <sequenceFlow id="sequenceFlow_72fe72b3-539f-4eab-89bf-41dfbe3fb161" sourceRef="ToBeCompensated" targetRef="ErrorHandled" />
    </subProcess>
    <serviceTask id="Activity-Cancel-flight-compensation" name="Cancel flight" isForCompensation="true" camunda:class="io.melody.core.infra.adapter.CancelFlightAdapter" />
    <association id="association_2a246e0f-9d79-4877-820a-c7e460c512f0" associationDirection="One" sourceRef="boundaryEvent_4c241145-4137-4520-b72c-cb1d27dd05c9" targetRef="Activity-Cancel-car-compensation" />
    <association id="association_53e426c4-0bbd-45f0-9814-7d83ddd56c2d" associationDirection="One" sourceRef="boundaryEvent_81ce4673-5d9b-42ad-9f40-f3c840c14b5c" targetRef="Activity-Cancel-hotel-compensation" />
    <association id="association_d6ff0a72-33fd-4d95-9813-254f1f0f606a" associationDirection="One" sourceRef="boundaryEvent_27317723-f1f7-4057-a25d-d080965b47ee" targetRef="Activity-Cancel-flight-compensation" />
  </process>
  <error id="error_b9f7d239-e1d2-45cf-a174-1c004f846e88" errorCode="java.lang.Throwable" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_70455e11-ffe0-48a6-ba61-09b42d731b10">
    <bpmndi:BPMNPlane id="BPMNPlane_ddb7dada-4745-47fd-b45c-9d2bda9a7d17" bpmnElement="trip">
      <bpmndi:BPMNShape id="BPMNShape_c5445fc6-b986-4843-a1f2-da9762e5472c" bpmnElement="Start-trip">
        <dc:Bounds x="160" y="100" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="157" y="136" width="43" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_af7754bd-71bd-4670-afd7-56ffcb51fc31" bpmnElement="Activity-Reserve-car">
        <dc:Bounds x="246" y="78" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_b7f2988c-e156-42b3-bcdf-3d96353e59c8" bpmnElement="Activity-Cancel-car-compensation">
        <dc:Bounds x="327" y="186" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_b77f4d8b-a8c0-4671-a5d7-42090dd1f69e" bpmnElement="Activity-Book-hotel">
        <dc:Bounds x="396" y="78" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_f481a43f-3a37-46bc-af49-a94f262c45c2" bpmnElement="Activity-Cancel-hotel-compensation">
        <dc:Bounds x="477" y="186" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_26aade24-0d2f-47a4-8048-7f60b878da8d" bpmnElement="Activity-Book-flight">
        <dc:Bounds x="546" y="78" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1e31a05d-40e5-4b7f-9031-4faffed71602" bpmnElement="Activity-Cancel-flight-compensation">
        <dc:Bounds x="627" y="186" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_b537ca8c-5beb-4476-8466-218ec74046cf" bpmnElement="End-trip">
        <dc:Bounds x="696" y="100" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="695" y="136" width="39" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_f2f8f56c-7164-47dd-9d0e-a0a918319497" bpmnElement="subProcess_fa3e7581-038b-47aa-9402-8a17a606e586" isExpanded="true">
        <dc:Bounds x="160" y="316" width="350" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_a9267d70-c4af-48c4-bc9f-5a07e0b690cb" bpmnElement="ErrorCatched">
        <dc:Bounds x="210" y="398" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="195" y="434" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_3ea47312-f852-49ba-8649-46775be16263" bpmnElement="ToBeCompensated">
        <dc:Bounds x="296" y="398" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="273" y="434" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_f5f6d195-646a-4f35-a621-c0b63721be38" bpmnElement="ErrorHandled">
        <dc:Bounds x="382" y="398" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="367" y="434" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_68108824-2753-4f2a-8075-cf4e28dcf68d" bpmnElement="sequenceFlow_e950c759-ab52-4221-938e-d5922efdd6b0">
        <di:waypoint x="246" y="416" />
        <di:waypoint x="296" y="416" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_b272d9a7-5b96-4a2e-942d-83ac26c09013" bpmnElement="sequenceFlow_72fe72b3-539f-4eab-89bf-41dfbe3fb161">
        <di:waypoint x="332" y="416" />
        <di:waypoint x="382" y="416" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_2f2f3623-ccdd-4097-be37-a28dd328844a" bpmnElement="boundaryEvent_27317723-f1f7-4057-a25d-d080965b47ee">
        <dc:Bounds x="578" y="140" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_31543e3b-c66e-4ff4-b835-be5fa6f825f8" bpmnElement="boundaryEvent_81ce4673-5d9b-42ad-9f40-f3c840c14b5c">
        <dc:Bounds x="428" y="140" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_dc920be1-ddcf-405b-9040-4e919c88b188" bpmnElement="boundaryEvent_4c241145-4137-4520-b72c-cb1d27dd05c9">
        <dc:Bounds x="278" y="140" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_42744b81-aefa-4b63-99df-ecb52cfeb961" bpmnElement="sequenceFlow_c50fdc81-747a-4320-9674-8ee0d92ecbc3">
        <di:waypoint x="196" y="118" />
        <di:waypoint x="246" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_5e9c569a-9584-431a-b882-52765d278f96" bpmnElement="sequenceFlow_b3241131-5373-432b-b6ce-8f1780aee84c">
        <di:waypoint x="346" y="118" />
        <di:waypoint x="396" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_2dbe1f73-2ac3-4d4b-80a0-ccbff1cb0a47" bpmnElement="sequenceFlow_3f812ff8-ab94-414a-b539-fe149e4c22f3">
        <di:waypoint x="496" y="118" />
        <di:waypoint x="546" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_6a538acf-93a8-43d7-9422-8734622bd1bb" bpmnElement="sequenceFlow_cdddb28b-dbda-4c70-83ad-2d5262cf8afa">
        <di:waypoint x="646" y="118" />
        <di:waypoint x="696" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_2095b54f-06e1-4be7-b1ae-eb8b11980340" bpmnElement="association_2a246e0f-9d79-4877-820a-c7e460c512f0">
        <di:waypoint x="296" y="176" />
        <di:waypoint x="296" y="226" />
        <di:waypoint x="326.5" y="226" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_9a181bee-1d18-4f18-b0e8-1922673aa73b" bpmnElement="association_53e426c4-0bbd-45f0-9814-7d83ddd56c2d">
        <di:waypoint x="446" y="176" />
        <di:waypoint x="446" y="226" />
        <di:waypoint x="476.5" y="226" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_62b36ed4-d329-4e18-971b-45e484ad73d9" bpmnElement="association_d6ff0a72-33fd-4d95-9813-254f1f0f606a">
        <di:waypoint x="596" y="176" />
        <di:waypoint x="596" y="226" />
        <di:waypoint x="626.5" y="226" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
